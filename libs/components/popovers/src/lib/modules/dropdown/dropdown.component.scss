@use 'libs/components/theme/src/lib/styles/mixins' as mixins;
@use 'libs/components/theme/src/lib/styles/variables' as *;
@use 'libs/components/theme/src/lib/styles/_public-api/themes/modern/_compat/mixins'
  as modernMixins;
@use 'libs/components/theme/src/lib/styles/compat-tokens-mixins' as compatMixins;

@include compatMixins.sky-default-overrides('.sky-dropdown') {
  --sky-override-caret-margin-left: #{$sky-margin};
  --sky-override-context-menu-padding: 3px 8px;
  --sky-override-context-menu-border-radius: 50%;
  --sky-override-context-menu-line-height: 1.428571429;
  --sky-override-context-menu-font-size: 15px;
}

@include compatMixins.sky-modern-overrides('.sky-dropdown') {
  --sky-override-context-menu-padding: var(--modern-size-3) var(--modern-size-8);
  --sky-override-context-menu-line-height: calc(20 / 14);
  --sky-override-context-menu-font-size: var(--sky-font-size-body-m);
}

.sky-dropdown-button-type-tab {
  @include mixins.sky-btn-tab();
  @include mixins.sky-btn-tab-selected();
  max-width: 100%;
  text-align: left;
}

.sky-dropdown-button-type-context-menu {
  border-radius: var(
    --sky-override-context-menu-border-radius,
    var(--sky-border-radius-s)
  );
  padding: var(
    --sky-override-context-menu-padding,
    var(--sky-space-inset-balanced-xs)
  );
  font-size: var(
    --sky-override-context-menu-font-size,
    var(--sky-font-size-body-l)
  );
  line-height: var(--sky-override-context-menu-line-height, 1);
}

:host-context(.sky-toolbar-container) {
  .sky-dropdown-button.sky-btn-link {
    color: $sky-text-color-default;
  }
}

.sky-dropdown-caret {
  margin-left: var(
    --sky-override-caret-margin-left,
    var(--sky-space-gap-icon-m)
  );
}

.sky-dropdown-button-container {
  display: flex;
}

.sky-dropdown-button-content-container {
  flex-shrink: 1;
  overflow: hidden;
  text-overflow: ellipsis;
}

.sky-dropdown-button-icon-container {
  flex-grow: 1;
}

.sky-dropdown-menu-container {
  position: fixed;
}

.hidden {
  visibility: hidden;
}

@include mixins.sky-theme-modern {
  .sky-dropdown-button-type-tab {
    @include modernMixins.sky-theme-modern-btn-tab();
    @include modernMixins.sky-theme-modern-btn-tab-selected();
  }

  .sky-dropdown-button-type-context-menu {
    background-color: var(--sky-color-background-action-tertiary-base);

    &:not(:hover):not(:focus-visible) {
      box-shadow: inset 0 0 0 var(--sky-border-width-action-base)
        var(--sky-color-border-action-tertiary-base);
    }
  }
}
