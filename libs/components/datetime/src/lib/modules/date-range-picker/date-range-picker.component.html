<div
  *ngIf="isReady && formGroup"
  class="sky-date-range-picker"
  [formGroup]="formGroup"
>
  <div
    class="sky-date-range-picker-form-group"
    [ngClass]="{
      'sky-date-range-picker-last-input':
        !showStartDatePicker && !showEndDatePicker
    }"
  >
    <sky-input-box
      [disabled]="disabled"
      [helpPopoverContent]="helpPopoverContent"
      [helpPopoverTitle]="helpPopoverTitle"
      [labelText]="
        label || ('skyux_date_range_picker_default_label' | skyLibResources)
      "
      [hintText]="hintText"
    >
      <select formControlName="calculatorId" (blur)="onFieldBlur()">
        <option
          *ngFor="let calculator of calculators"
          [value]="calculator.calculatorId"
        >
          {{ calculator.shortDescription }}
        </option>
      </select>
    </sky-input-box>
  </div>
  <div
    class="sky-date-range-picker-form-group"
    [ngClass]="{
      'sky-date-range-picker-last-input':
        showStartDatePicker && !showEndDatePicker
    }"
    [hidden]="!showStartDatePicker"
  >
    <sky-input-box [disabled]="disabled">
      <label
        class="sky-control-label"
        [attr.for]="dateRangePickerId + '-start-date'"
        [ngClass]="{
          'sky-control-label-required':
            startDateRequired || outerControlRequired
        }"
      >
        {{
          selectedCalculator?.type
            | skyDateRangePickerStartDateResourceKey
            | skyLibResources
        }}
      </label>

      <sky-datepicker>
        <input
          class="sky-form-control"
          formControlName="startDate"
          [attr.aria-label]="
            label
              ? ('skyux_date_range_picker_default_aria_label'
                | skyLibResources
                  : (selectedCalculator?.type
                      | skyDateRangePickerStartDateResourceKey
                      | skyLibResources)
                  : label)
              : (selectedCalculator?.type
                | skyDateRangePickerStartDateResourceKey
                | skyLibResources)
          "
          [attr.id]="dateRangePickerId + '-start-date'"
          [attr.aria-required]="outerControlRequired ? true : null"
          [dateFormat]="dateFormatOrDefault"
          [required]="
            showStartDatePicker && (!!startDateRequired || outerControlRequired)
          "
          (blur)="onFieldBlur()"
          skyDatepickerInput
        />
      </sky-datepicker>
    </sky-input-box>
  </div>

  <div
    class="sky-date-range-picker-form-group"
    [ngClass]="{ 'sky-date-range-picker-last-input': showEndDatePicker }"
    [hidden]="!showEndDatePicker"
  >
    <sky-input-box [disabled]="disabled">
      <label
        class="sky-control-label"
        [attr.for]="dateRangePickerId + '-end-date'"
        [ngClass]="{
          'sky-control-label-required': endDateRequired || outerControlRequired
        }"
      >
        {{
          selectedCalculator?.type
            | skyDateRangePickerEndDateResourceKey
            | skyLibResources
        }}
      </label>

      <sky-datepicker>
        <input
          class="sky-form-control"
          formControlName="endDate"
          skyDatepickerInput
          [attr.aria-label]="
            label
              ? ('skyux_date_range_picker_default_aria_label'
                | skyLibResources
                  : (selectedCalculator?.type
                      | skyDateRangePickerEndDateResourceKey
                      | skyLibResources)
                  : label)
              : (selectedCalculator?.type
                | skyDateRangePickerEndDateResourceKey
                | skyLibResources)
          "
          [attr.id]="dateRangePickerId + '-end-date'"
          [attr.aria-required]="outerControlRequired ? true : null"
          [dateFormat]="dateFormatOrDefault"
          [required]="
            showEndDatePicker && (!!endDateRequired || outerControlRequired)
          "
          (blur)="onFieldBlur()"
        />
      </sky-datepicker>
    </sky-input-box>
  </div>
</div>
