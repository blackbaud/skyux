<sky-data-grid
  data-sky-id="example-data-grid"
  multiselect
  stacked
  [data]="gridData()"
  [(selectedRowIds)]="selectedRowIds"
  [(rowDeleteIds)]="rowDeleteIds"
  (rowDeleteCancel)="rowDeleteCancel($event)"
  (rowDeleteConfirm)="rowDeleteConfirm($event)"
>
  <sky-data-grid-column
    columnId="context"
    width="50"
    [resizable]="false"
    [sortable]="false"
    [template]="contextMenu"
  />
  <sky-data-grid-column field="name" headingText="Name" />
  <sky-data-grid-column
    field="age"
    headingText="Age"
    dataType="number"
    width="60"
  />
  <sky-data-grid-column
    field="startDate"
    headingText="Start date"
    dataType="date"
  />
  <sky-data-grid-column
    field="endDate"
    headingText="End date"
    dataType="date"
  />
  <sky-data-grid-column field="department" headingText="Department">
    <ng-template let-row="row">{{ row.department?.name }}</ng-template>
  </sky-data-grid-column>
  <sky-data-grid-column field="jobTitle" headingText="Title">
    <ng-template let-row="row">{{ row.jobTitle?.name }}</ng-template>
  </sky-data-grid-column>
</sky-data-grid>

@let names = selectedNames();

<sky-box>
  <sky-box-content>
    Selected rows: {{ names }}
    @if (!names) {
      <em class="sky-deemphasized">no rows selected</em>
    }
  </sky-box-content>
</sky-box>

<ng-template #contextMenu let-row="row">
  <sky-dropdown
    buttonType="context-menu"
    [attr.data-sky-id]="'context-menu-' + row.id"
    [label]="`Context menu for ${row?.name}`"
  >
    <sky-dropdown-menu>
      <sky-dropdown-item>
        <button
          type="button"
          [attr.aria-label]="`Delete ${row?.name}`"
          (click)="actionClicked(row, 'Delete')"
        >
          Delete
        </button>
      </sky-dropdown-item>
      <sky-dropdown-item>
        <button
          type="button"
          [attr.aria-label]="`Mark ${row?.name} inactive`"
          (click)="actionClicked(row, 'Mark inactive')"
        >
          Mark inactive
        </button>
      </sky-dropdown-item>
      <sky-dropdown-item>
        <button
          type="button"
          [attr.aria-label]="`More info for ${row?.name}`"
          (click)="actionClicked(row, 'More info')"
        >
          More info
        </button>
      </sky-dropdown-item>
    </sky-dropdown-menu>
  </sky-dropdown>
</ng-template>
