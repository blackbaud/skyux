<div
  class="sky-modal-dialog"
  aria-modal="true"
  [attr.aria-describedby]="ariaDescribedBy || modalContentId.id"
  [attr.aria-labelledby]="ariaLabelledBy || headerId.id"
  [attr.aria-owns]="ariaOwns"
  [attr.role]="ariaRoleOrDefault"
  (window:resize)="windowResize()"
>
  <div
    tabindex="-1"
    class="sky-modal sky-shadow sky-box sky-elevation-16 sky-modal-{{ size }}"
    [ngClass]="{
      'sky-modal-tiled': tiledBody,
      'sky-modal-viewkeeper': viewkeeperEnabled()
    }"
    [ngStyle]="{
      zIndex: modalZIndex
    }"
  >
    <div
      class="sky-modal-header"
      [ngStyle]="{
        'box-shadow': scrollShadow?.topShadow
      }"
    >
      <div
        #headerId="skyId"
        class="sky-modal-header-content"
        skyId
        [ngClass]="{
          'sky-font-heading-2': size === 'full-page'
        }"
      >
        @if (headingText) {
          <sky-modal-header>
            {{ headingText }}
            @if (helpKey || helpPopoverContent) {
              <sky-help-inline
                class="sky-control-help"
                [helpKey]="helpKey"
                [labelText]="headingText"
                [popoverContent]="helpPopoverContent"
                [popoverTitle]="helpPopoverTitle"
              />
            }
          </sky-modal-header>
        } @else {
          <ng-content select="sky-modal-header" />
        }
      </div>
      <div class="sky-modal-header-buttons">
        @if (legacyHelpKey) {
          <button
            class="sky-btn sky-modal-btn-help"
            name="help-button"
            type="button"
            [attr.aria-label]="'skyux_modal_open_help' | skyLibResources"
            (click)="helpButtonClick()"
          >
            <sky-icon icon="question-circle" />
          </button>
        }

        <button
          type="button"
          class="sky-btn sky-modal-btn-close"
          [attr.aria-label]="'skyux_modal_close' | skyLibResources"
          (click)="closeButtonClick()"
        >
          <sky-icon icon="close" />
        </button>
      </div>
    </div>
    <div
      #modalContentId="skyId"
      #modalContentWrapper
      class="sky-modal-content sky-padding-even-large"
      role="region"
      tabindex="0"
      skyId
      [attr.aria-labelledby]="headerId.id"
      [skyScrollShadowEnabled]="scrollShadowEnabled"
      (skyScrollShadow)="scrollShadowChange($event)"
    >
      <div
        skyLayoutHost
        [layout]="layout()"
        [style.display]="layout() === 'none' ? 'contents' : undefined"
      >
        <ng-content select="sky-modal-content" />
      </div>
    </div>
    <div
      class="sky-modal-footer"
      [ngStyle]="{
        'box-shadow': scrollShadow?.bottomShadow
      }"
    >
      <ng-content select="sky-modal-footer" />
    </div>
  </div>
</div>
