<sky-docs-demo-page
  moduleName="SkyProgressIndicatorModule"
  moduleSourceCodePath="src/app/public/modules/progress-indicator/"
  pageTitle="Waterfall progress indicator"
>

<sky-docs-demo-page-summary>
  Waterfall progress indicators walk users through sequential steps in lengthy or complex tasks.
</sky-docs-demo-page-summary>

  <sky-docs-demo>
    <sky-progress-indicator
      id="progress-indicator-waterfall"
      [messageStream]="progressMessageStream"
      [startingIndex]="2"
      (progressChanges)="updateIndex($event)"
      #progressIndicator
    >

      <sky-progress-indicator-title>
        Set up my connection
      </sky-progress-indicator-title>

      <sky-progress-indicator-item
        title="Configure connection"
      >
        <div>
          <button *ngIf="activeIndex === 0"
            class="sky-btn sky-btn-primary"
            type="button"
            (click)="configureConnection(true)"
          >
            Set up connection
          </button>
          <button *ngIf="activeIndex > 0"
            class="sky-btn sky-btn-link"
            type="button"
            (click)="configureConnection(false)"
          >
            Edit connection
          </button>
        </div>
      </sky-progress-indicator-item>

      <sky-progress-indicator-item
        title="Select remote server"
      >
        <div *ngIf="activeIndex >= 1">
          <button *ngIf="activeIndex === 1"
            class="sky-btn sky-btn-primary"
            type="button"
            (click)="setServer(true)"
          >
            Select server
          </button>
          <button *ngIf="activeIndex > 1"
            class="sky-btn sky-btn-link"
            type="button"
            (click)="setServer(false)"
          >
            Change server
          </button>
        </div>
      </sky-progress-indicator-item>

      <sky-progress-indicator-item
        title="Test connection"
      >
        <div *ngIf="activeIndex >= 2">
          <button *ngIf="activeIndex === 2"
            class="sky-btn sky-btn-primary"
            type="button"
            (click)="testConnection(true)"
          >
            Test connection
          </button>
          <button *ngIf="activeIndex > 2"
            class="sky-btn sky-btn-link"
            type="button"
            (click)="testConnection(false)"
          >
            Retest connection
          </button>
        </div>
      </sky-progress-indicator-item>

      <sky-progress-indicator-item
        title="Turn on connection"
      >
        <div *ngIf="activeIndex >= 3">
          <button *ngIf="activeIndex === 3"
            class="sky-btn sky-btn-primary"
            type="button"
            (click)="alertMessage('Form completed')"
          >
            Turn on
          </button>
        </div>
      </sky-progress-indicator-item>

      <sky-progress-indicator-reset-button
        [progressIndicator]="progressIndicator"
      >
        Erase all settings
      </sky-progress-indicator-reset-button>
    </sky-progress-indicator>
  </sky-docs-demo>
  <sky-docs-design-guidelines>

    <sky-docs-demo-page-section
      heading="Usage"
    >
      <sky-docs-design-guideline
        heading="Use when"
        headingStyle="success"
      >
        <p>
          Use waterfall progress indicators for long or complex setup processes with at least three steps that users typically complete only once. Waterfall indicators are ideal when events outside of the system force users to complete tasks in multiple sittings or when users must enter large amounts of data.
        </p>

        <sky-docs-design-guideline-thumbnail
          caption="Do use waterfall progress indicators for complex configuration processes that users may complete in stages."
          captionType="success"
          imageSource="~/assets/img/guidelines/passive-indicator/waterfall-progress-layout.png"
        >
        </sky-docs-design-guideline-thumbnail>
      </sky-docs-design-guideline>

      <sky-docs-design-guideline
      >
        <p>
          Use waterfall progress indicators when the complexity of steps varies drastically. For example, one step may require a full-screen modal for complex interactions, while another step requires a small modal for a few simple inputs. Waterfall steps can open <a href="https://developer.blackbaud.com/skyux/components/wizard">wizards</a> if necessary.
        </p>

        <sky-docs-design-guideline-thumbnail
          caption="Do use modals of the appropriate size for the interactions in each waterfall step."
          captionType="success"
          imageSource="~/assets/img/guidelines/passive-indicator/waterfall-progress-usage-2.png"
        >
        </sky-docs-design-guideline-thumbnail>

        <sky-docs-design-guideline-thumbnail
          caption="Don't put inputs inside waterfall progress indicators."
          captionType="danger"
          imageSource="~/assets/img/guidelines/passive-indicator/waterfall-progress-usage-3.png"
        >
        </sky-docs-design-guideline-thumbnail>
      </sky-docs-design-guideline>

      <sky-docs-design-guideline
        heading="Don't use when"
        headingStyle="danger"
      >
        <p>
          Don’t use waterfall progress indicators when users monitor a sequence of events but are not responsible for completing the steps. Use <a href="https://developer.blackbaud.com/skyux/components/progress-indicator/passive-progress-indicator">passive progress indicators</a> instead.
        </p>

        <sky-docs-design-guideline-thumbnail
          caption="Don't use waterfall progress indicators for steps outside of user control."
          captionType="danger"
          imageSource="~/assets/img/guidelines/passive-indicator/passive-progress-usage-6.png"
        >
        </sky-docs-design-guideline-thumbnail>
      </sky-docs-design-guideline>

      <sky-docs-design-guideline>
        <p>
          Don’t use waterfall progress indicators when users perform tasks repeatedly or when tasks are best presented as multiple steps but only require a single sitting. Use <a href="https://developer.blackbaud.com/skyux/components/wizard">wizards</a> instead.
        </p>

        <sky-docs-design-guideline-thumbnail
          caption="Don't use waterfall progress indicators for brief interactions, even when they are best divided into multiple steps."
          captionType="danger"
          imageSource="~/assets/img/guidelines/passive-indicator/waterfall-progress-usage-4.png"
        >
        </sky-docs-design-guideline-thumbnail>

        <sky-docs-design-guideline-thumbnail
          caption="Do use wizards for multi-step tasks that users perform repeatedly or complete in a single sitting."
          captionType="success"
          imageSource="~/assets/img/guidelines/passive-indicator/waterfall-progress-usage-5.png"
        >
        </sky-docs-design-guideline-thumbnail>
      </sky-docs-design-guideline>

      <sky-docs-design-guideline>
        <p>
          Don’t use waterfall progress indicators when processes include fewer than three steps or when the number or order of steps may change. If early decisions branch in different directions, arrange the workflow so that users make those decisions before the progress indicator.
        </p>

        <sky-docs-design-guideline-thumbnail
          caption="Don't present waterfall progress indicators before the extent of tasks is known.
"
          captionType="danger"
          imageSource="~/assets/img/guidelines/passive-indicator/waterfall-progress-usage-6.png"
        >
        </sky-docs-design-guideline-thumbnail>

        <sky-docs-design-guideline-thumbnail
          caption="Do present decisions that determine the number and order of steps before showing waterfall progress indicators."
          captionType="success"
          imageSource="~/assets/img/guidelines/passive-indicator/waterfall-progress-usage-7.png"
        >
        </sky-docs-design-guideline-thumbnail>
      </sky-docs-design-guideline>

      <sky-docs-design-guideline>
        <p>
          Don’t use waterfall progress indicators to edit properties after completing configuration processes. Use <a href="https://developer.blackbaud.com/skyux/components/modal">modals</a> instead.
        </p>

        <p>
          If configuration properties are interrelated and require users to reexamine all or most properties, then reframe the editing task as “starting over” and restart the waterfall process.
        </p>

        <sky-docs-design-guideline-thumbnail
          caption="Don't revert finished states to edit properties in waterfall progress indicators.
"
          captionType="danger"
          imageSource="~/assets/img/guidelines/passive-indicator/waterfall-progress-usage-8.png"
        >
        </sky-docs-design-guideline-thumbnail>

        <sky-docs-design-guideline-thumbnail
          caption="Do group related properties and let users edit them in isolation after they complete waterfall progress indicators."
          captionType="success"
          imageSource="~/assets/img/guidelines/passive-indicator/waterfall-progress-usage-9.png"
        >
        </sky-docs-design-guideline-thumbnail>
      </sky-docs-design-guideline>
    </sky-docs-demo-page-section>

    <sky-docs-demo-page-section
      heading="Anatomy"
    >
      <sky-docs-anatomy
        imagePath="~/assets/img/guidelines/passive-indicator/waterfall-progress-anatomy.png"
      >
        <sky-docs-anatomy-item>Waterfall title</sky-docs-anatomy-item>
        <sky-docs-anatomy-item>Step indicator</sky-docs-anatomy-item>
        <sky-docs-anatomy-item>Step label</sky-docs-anatomy-item>
        <sky-docs-anatomy-item>Completed step action</sky-docs-anatomy-item>
        <sky-docs-anatomy-item>Active step action</sky-docs-anatomy-item>
        <sky-docs-anatomy-item isOptional="true">Step details </sky-docs-anatomy-item>
        <sky-docs-anatomy-item isOptional="true">Start-over action </sky-docs-anatomy-item>
      </sky-docs-anatomy>
    </sky-docs-demo-page-section>

    <sky-docs-demo-page-section
      heading="Options"
    >
      <sky-docs-design-guideline
        heading="Waterfall title"
      >
        <p class="sky-docs-text-block">
          We strongly recommend including a waterfall title to reflect the context of the overall task. Do not use a left-aligned page title when you include a waterfall title. The waterfall title does not change when users progress through the waterfall steps.
        </p>
      </sky-docs-design-guideline>

      <sky-docs-design-guideline
        heading="Step details"
      >
        <p class="sky-docs-text-block">
          You can provide additional details about completed steps, but limit details to single pieces of information. Don’t go overboard because users can reopen modals to review choices as necessary.
        </p>
      </sky-docs-design-guideline>

      <sky-docs-design-guideline
        heading="Start-over action"
      >
        <p class="sky-docs-text-block">
          You can include a start-over action to let users erase all saved data from the waterfall process. This returns users to the first step or to an earlier point in the workflow if decisions occured before the waterfall progress indicator.
        </p>
      </sky-docs-design-guideline>
    </sky-docs-demo-page-section>

    <sky-docs-demo-page-section
      heading="Behavior & states"
    >
      <sky-docs-design-guideline>
        <p class="sky-docs-text-block">
          Waterfall progress indicators guide users through one active step at a time. When users complete a step, the progress indicator updates its step indicator and step action to the completed state and updates the next step indicator and step action to the active state. Users can review and edit completed steps, but this does not undo the completed state.
        </p>
        <p class="sky-docs-text-block">
          The final step summarizes the changes and requests user confirmation. You do not need to include all data that users enter in the summary, but confirmation is required. After users complete the final step, replace the waterfall progress indicator with a page that displays the finished or active state of the system.
        </p>
      </sky-docs-design-guideline>
    </sky-docs-demo-page-section>

    <sky-docs-demo-page-section
      heading="Content"
    >
      <sky-docs-design-guideline>
        <p class="sky-docs-text-block">
          Use a waterfall title in place of an ordinary page title to provide context for the overall task. Follow the same pattern as modal titles and start the waterfall title with a verb that indicates the action that occurs when users complete the waterfall steps.
        </p>
        <p class="sky-docs-text-block">
          For step labels, start with a number and concisely describe the objective using the <b>&lt;verb> &lt;direct object></b> format. In the label for the last step, describe the cumulative change that occurs at the end of the process.
        </p>
        <p class="sky-docs-text-block">
          Step action (button) labels closely follow step labels and use the same <b>&lt;verb> &lt;direct object></b> format, but they do not need to be identical. For the first step action label, be generic and conversational (“Get started”), and for completed step actions, use verbs appropriate to post hoc actions (“Change”, “Edit”).
        </p>
      </sky-docs-design-guideline>

      <sky-docs-design-guideline
        heading="Layout"
      >
        <p>
          Waterfall progress indicators are 400 pixels wide and centered inside the page. The waterfall title is the page title. Do not combine waterfall indicators with other content or actions. If waterfall indicators require extra context such as descriptions, links, or instructions, include it after the waterfall title and before the first step.
        </p>

        <sky-docs-design-guideline-thumbnail
          caption="Do use waterfall progress indicators as the only content on a page while users complete them."
          captionType="success"
          imageSource="~/assets/img/guidelines/passive-indicator/waterfall-progress-layout.png"
        >
        </sky-docs-design-guideline-thumbnail>
      </sky-docs-design-guideline>
    </sky-docs-demo-page-section>

    <sky-docs-demo-page-section
      heading="Related information"
    >
      <sky-docs-design-guideline
        heading="Components"
      >
        <ul>
          <li><a href="https://developer.blackbaud.com/skyux/components/modal">Modal</a></li>
          <li><a href="https://developer.blackbaud.com/skyux-progress-indicator/docs/passive-indicator">Passive progress indicator</a></li>
          <li><a href="https://developer.blackbaud.com/skyux/components/wizard">Wizard</a></li>
        </ul>
      </sky-docs-design-guideline>

      <sky-docs-design-guideline
        heading="Guidelines"
      >
        <ul>
          <li><a href="https://developer.blackbaud.com/skyux/design/guidelines/form-design">Form design</a></li>
        </ul>
      </sky-docs-design-guideline>
    </sky-docs-demo-page-section>

  </sky-docs-design-guidelines>
  <sky-docs-code-examples
    [packageDependencies]="{
      '@skyux/progress-indicator': '*'
    }"
  >
    <sky-docs-code-example heading="Waterfall progress indicator"
      sourceCodePath="src/app/public/plugin-resources/code-examples/waterfall-indicator/basic"></sky-docs-code-example>
  </sky-docs-code-examples>
</sky-docs-demo-page>
