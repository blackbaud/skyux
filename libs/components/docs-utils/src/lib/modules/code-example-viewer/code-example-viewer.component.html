<sky-box headingLevel="3" headingStyle="3" [headingText]="headingText()">
  <sky-box-controls>
    @let ariaLabel =
      isCodeVisible()
        ? ('sky_example_viewer_hide_code_button_label' | skyLibResources)
        : ('sky_example_viewer_show_code_button_label' | skyLibResources);
    <button
      class="sky-btn sky-btn-icon-borderless sky-margin-inline-sm"
      data-sky-id="toggle-code-visibility-btn"
      type="button"
      [attr.aria-label]="ariaLabel"
      [attr.title]="ariaLabel"
      (click)="toggleCodeVisibility()"
    >
      <sky-icon iconName="code" />
    </button>
    <button
      aria-label="Open code in StackBlitz"
      class="sky-btn sky-btn-icon-borderless"
      data-sky-id="stackblitz-btn"
      type="button"
      (click)="openInStackBlitz()"
    >
      <sky-icon iconName="open" />
    </button>
  </sky-box-controls>

  <div class="sky-code-example-viewer-demo sky-padding-even-xl">
    @if (!demoHidden()) {
      <ng-template [ngComponentOutlet]="componentType()" />
    } @else {
      {{ 'sky_example_viewer_demo_hidden_message' | skyLibResources }}
    }
  </div>

  @if (isCodeVisible()) {
    <div class="sky-code-example-viewer-code">
      <sky-vertical-tabset>
        @for (obj of files() | keyvalue; track obj.key) {
          <sky-vertical-tab
            [active]="obj.key === primaryFile()"
            [tabHeading]="obj.key"
          >
            <sky-code-snippet
              [code]="obj.value"
              [language]="getCodeLanguage(obj.key)"
            />
          </sky-vertical-tab>
        }
      </sky-vertical-tabset>
    </div>
  }
</sky-box>
