<div class="sky-avatar">
  @if (canChange) {
    <div class="sky-avatar-file-drop">
      <sky-file-drop
        [acceptedTypes]="'image/*'"
        [fileUploadAriaLabel]="
          src
            ? ('skyux_avatar_upload_change_aria_label' | skyLibResources: name)
            : ('skyux_avatar_upload_new_aria_label' | skyLibResources: name)
        "
        [multiple]="false"
        [maxFileSize]="maxFileSize"
        [multiple]="false"
        (filesChanged)="photoDrop($event)"
      >
        <ng-container *ngTemplateOutlet="innerTemplate" />
      </sky-file-drop>
    </div>
  } @else {
    <div>
      <ng-container *ngTemplateOutlet="innerTemplate" />
    </div>
  }
</div>

<ng-template #innerTemplate>
  <sky-avatar-inner
    [name]="name"
    [size]="size ?? (sizeDefault | async) ?? 'large'"
    [src]="src"
  />
</ng-template>
