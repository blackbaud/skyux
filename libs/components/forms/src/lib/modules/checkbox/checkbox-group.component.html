<fieldset
  class="sky-checkbox-group"
  [attr.aria-invalid]="!!formGroup?.errors"
  [attr.aria-describedby]="hintText ? hintTextEl.id : undefined"
  [attr.aria-errormessage]="
    headingText && formGroup?.errors ? errorId : undefined
  "
>
  <legend
    class="sky-control-label"
    [ngClass]="{
      'sky-screen-reader-only': headingHidden,
      'sky-margin-stacked-xs': !!hintText,
      'sky-margin-stacked-sm': !hintText
    }"
  >
    <span
      class="sky-margin-inline-xs"
      [ngClass]="{
        'sky-control-label-required': required
      }"
    >
      <span *ngIf="!headingLevel" [class]="'sky-heading-text ' + headingClass">
        {{ headingText }}
      </span>
      <h3 *ngIf="headingLevel === 3" [class]="headingClass">
        {{ headingText }}
      </h3>
      <h4 *ngIf="headingLevel === 4" [class]="headingClass">
        {{ headingText }}
      </h4>
      <h5 *ngIf="headingLevel === 5" [class]="headingClass">
        {{ headingText }}
      </h5> </span
    ><span class="sky-screen-reader-only" *ngIf="required">{{
      'skyux_checkbox_group_required' | skyLibResources
    }}</span
    ><sky-help-inline
      *ngIf="helpPopoverContent || helpKey"
      [helpKey]="helpKey"
      [labelText]="headingText"
      [popoverTitle]="helpPopoverTitle"
      [popoverContent]="helpPopoverContent"
    />
  </legend>
  <div
    skyId
    [ngClass]="{
      'sky-font-deemphasized sky-margin-stacked-lg sky-checkbox-group-hint-text':
        !!hintText
    }"
    #hintTextEl="skyId"
  >
    {{ hintText }}
  </div>
  <span class="sky-checkbox-group-inline sky-switch-icon-group">
    <ng-content select="sky-checkbox[icon]" />
  </span>
  <span class="sky-checkbox-group-stacked">
    <ng-content select="sky-checkbox" />
  </span>
</fieldset>
<sky-form-errors
  [id]="errorId"
  [attr.data-sky-id]="formErrorsDataId"
  [errors]="formGroup?.errors"
  [labelText]="headingText"
  [touched]="formGroup?.touched"
  [dirty]="formGroup?.dirty"
>
  <ng-content select="sky-form-error" />
</sky-form-errors>
