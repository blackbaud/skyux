@if (hasLegendItems()) {
  <ul
    class="sky-chart-legend"
    role="list"
    [aria-label]="'chart.legend.list_label' | skyLibResources"
    (focusin)="onLegendFocusIn($event)"
    (keydown)="onLegendKeydown($event)"
  >
    @for (
      item of legendItems();
      track item.label + '-' + item.datasetIndex + '-' + item.index
    ) {
      <li>
        <button
          #legendButton
          class="sky-btn"
          type="button"
          [attr.tabindex]="activeLegendIndex() === $index ? 0 : -1"
          [attr.aria-pressed]="item.isVisible"
          (focus)="onLegendButtonFocus($index)"
          (click)="toggleLegendItem(item, $index)"
        >
          <span
            aria-hidden="true"
            class="sky-chart-legend-marker sky-margin-inline-xs"
            [style.background]="item.seriesColor"
          ></span>

          <span
            class="sky-font-body-sm sky-chart-legend-item"
            [style.text-decoration]="item.isVisible ? '' : 'line-through'"
          >
            {{ item.label }}
          </span>
        </button>
      </li>
    }
  </ul>
}
