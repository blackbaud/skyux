@use '../../mixins' as mixins;
@use '../../variables' as *;
@use '../../compat-tokens-mixins' as compatMixins;

.sky-theme-modern {
  .sky-btn {
    border: none;
    border-radius: var(--sky-border-radius-s);
    font-size: var(--sky-font-size-body-m);
    transition: box-shadow $sky-transition-time-short;

    line-height: var(--sky-font-line_height-body-m);
  }

  .sky-btn-default,
  .sky-btn-primary,
  .sky-btn-danger,
  .sky-btn-link,
  .sky-btn-borderless {
    padding: var(--sky-comp-button-space-inset-top)
      var(--sky-comp-button-space-inset-right)
      var(--sky-comp-button-space-inset-bottom)
      var(--sky-comp-button-space-inset-left);
  }

  .sky-btn-default,
  .sky-btn-primary,
  .sky-btn-danger,
  .sky-btn-link,
  .sky-btn-borderless,
  .sky-btn-icon-borderless,
  .sky-btn-icon,
  .sky-btn-link-inline,
  .sky-btn-borderless-inline {
    border: none;
    outline: none;

    &:hover {
      text-decoration: none;
    }

    &.sky-btn-disabled,
    &[disabled] {
      &,
      &:hover,
      &:focus-visible,
      &.sky-btn-focus,
      &:active,
      &.sky-btn-active {
        border: none;
        opacity: 1;
        color: var(--sky-color-text-deemphasized);

        &.sky-btn-link-inline {
          color: var(--sky-color-text-default);
        }
      }
    }
  }

  .sky-btn-icon {
    padding: var(--sky-comp-button-icon-space-inset-top)
      var(--sky-comp-button-icon-space-inset-right)
      var(--sky-comp-button-icon-space-inset-bottom)
      var(--sky-comp-button-icon-space-inset-left);
  }

  .sky-btn-default,
  .sky-btn-icon {
    background-color: var(--sky-color-background-action-secondary-base);
    color: var(--sky-color-text-default);
    box-shadow:
      inset 0 0 0 var(--sky-border-width-action-base)
        var(--sky-color-border-action-secondary-base),
      var(
        --sky-comp-override-toolbar-button-elevation-base,
        var(--sky-elevation-action-secondary-base)
      );

    &:hover {
      background-color: var(--sky-color-background-action-secondary-hover);
      box-shadow:
        inset 0 0 0 var(--sky-border-width-action-hover)
          var(--sky-color-border-action-secondary-hover),
        var(
          --sky-comp-override-toolbar-button-elevation-hover,
          var(--sky-elevation-action-secondary-hover)
        );
    }

    &:active,
    &.sky-btn-active {
      background-color: var(--sky-color-background-action-secondary-active);
      box-shadow:
        inset 0 0 0 var(--sky-border-width-action-active)
          var(--sky-color-border-action-secondary-active),
        var(
          --sky-comp-override-toolbar-button-elevation-active,
          var(--sky-elevation-action-secondary-active)
        );
      transition: none;
    }

    &:focus-visible:not(:active) {
      background-color: var(--sky-color-background-action-secondary-focus);
      box-shadow:
        inset 0 0 0 var(--sky-border-width-action-focus)
          var(--sky-color-border-action-secondary-focus),
        var(
          --sky-comp-override-toolbar-button-elevation-focus,
          var(--sky-elevation-action-secondary-focus)
        );
    }

    &.sky-btn-disabled,
    &[disabled] {
      &,
      &:hover,
      &:focus-visible,
      &.sky-btn-focus,
      &:active,
      &.sky-btn-active {
        box-shadow:
          inset 0 0 0 var(--sky-border-width-action-disabled)
            var(--sky-color-border-action-secondary-disabled),
          var(
            --sky-comp-override-toolbar-button-elevation-disabled,
            var(--sky-elevation-action-secondary-disabled)
          );
        background-color: var(--sky-color-background-action-secondary-disabled);

        &:is(:focus-visible, .sky-btn-focus) {
          box-shadow:
            inset 0 0 0 var(--sky-border-width-action-disabled)
              var(--sky-color-border-action-secondary-disabled),
            var(
              --sky-comp-override-toolbar-button-elevation-disabled,
              var(--sky-elevation-action-secondary-disabled)
            );
        }
      }
    }
  }

  .sky-btn-primary {
    background-color: var(--sky-color-background-action-primary-base);
    color: var(--sky-color-text-inverse);
    box-shadow:
      inset 0 0 0 var(--sky-border-width-action-base)
        var(--sky-color-border-action-primary-base),
      var(
        --sky-comp-override-toolbar-button-elevation-base,
        var(--sky-elevation-action-primary-base)
      );

    &:hover {
      background-color: var(--sky-color-background-action-primary-hover);
      box-shadow:
        inset 0 0 0 var(--sky-border-width-action-hover)
          var(--sky-color-border-action-primary-hover),
        var(
          --sky-comp-override-toolbar-button-elevation-hover,
          var(--sky-elevation-action-primary-hover)
        );
    }

    &:active,
    &.sky-btn-active {
      background-color: var(--sky-color-background-action-primary-active);
      box-shadow:
        inset 0 0 0 var(--sky-border-width-action-active)
          var(--sky-color-border-action-primary-active),
        var(
          --sky-comp-override-toolbar-button-elevation-active,
          var(--sky-elevation-action-primary-active)
        );
      transition: none;
    }

    &:focus-visible:not(:active) {
      background-color: var(--sky-color-background-action-primary-focus);
      box-shadow:
        inset 0 0 0 var(--sky-border-width-action-focus)
          var(--sky-color-border-action-primary-focus),
        var(
          --sky-comp-override-toolbar-button-elevation-focus,
          var(--sky-elevation-action-primary-focus)
        );
    }

    &.sky-btn-disabled,
    &[disabled] {
      &,
      &:hover,
      &:focus-visible,
      &.sky-btn-focus,
      &:active,
      &.sky-btn-active {
        box-shadow:
          inset 0 0 0 var(--sky-border-width-action-disabled)
            var(--sky-color-border-action-primary-disabled),
          var(
            --sky-comp-override-toolbar-button-elevation-disabled,
            var(--sky-elevation-action-primary-disabled)
          );
        background-color: var(--sky-color-background-action-primary-disabled);

        &:is(:focus-visible, .sky-btn-focus) {
          box-shadow:
            inset 0 0 0 var(--sky-border-width-action-disabled)
              var(--sky-color-border-action-primary-disabled),
            var(
              --sky-comp-override-toolbar-button-elevation-disabled,
              var(--sky-elevation-action-primary-disabled)
            );
        }
      }
    }
  }

  .sky-btn-danger {
    background-color: var(--sky-color-background-action-danger-base);
    color: var(--sky-color-text-inverse);
    box-shadow:
      inset 0 0 0 var(--sky-border-width-action-base)
        var(--sky-color-border-action-danger-base),
      var(
        --sky-comp-override-toolbar-button-elevation-base,
        var(--sky-elevation-action-danger-base)
      );

    &:hover {
      background-color: var(--sky-color-background-action-danger-hover);
      box-shadow:
        inset 0 0 0 var(--sky-border-width-action-hover)
          var(--sky-color-border-action-danger-hover),
        var(
          --sky-comp-override-toolbar-button-elevation-hover,
          var(--sky-elevation-action-danger-hover)
        );
    }

    &:active,
    &.sky-btn-active {
      background-color: var(--sky-color-background-action-danger-active);
      box-shadow:
        inset 0 0 0 var(--sky-border-width-action-active)
          var(--sky-color-border-action-danger-active),
        var(
          --sky-comp-override-toolbar-button-elevation-active,
          var(--sky-elevation-action-danger-active)
        );
      transition: none;
    }

    &:focus-visible:not(:active) {
      background-color: var(--sky-color-background-action-danger-focus);
      box-shadow:
        inset 0 0 0 var(--sky-border-width-action-focus)
          var(--sky-color-border-action-danger-focus),
        var(
          --sky-comp-override-toolbar-button-elevation-focus,
          var(--sky-elevation-action-danger-focus)
        );
    }

    &.sky-btn-disabled,
    &[disabled] {
      &,
      &:hover,
      &:focus-visible,
      &.sky-btn-focus,
      &:active,
      &.sky-btn-active {
        box-shadow:
          inset 0 0 0 var(--sky-border-width-action-disabled)
            var(--sky-color-border-action-danger-disabled),
          var(
            --sky-comp-override-toolbar-button-elevation-disabled,
            var(--sky-elevation-action-danger-disabled)
          );
        background-color: var(--sky-color-background-action-danger-disabled);

        &:is(:focus-visible, .sky-btn-focus) {
          box-shadow:
            inset 0 0 0 var(--sky-border-width-action-disabled)
              var(--sky-color-border-action-danger-disabled),
            var(
              --sky-comp-override-toolbar-button-elevation-disabled,
              var(--sky-elevation-action-danger-disabled)
            );
        }
      }
    }
  }

  .sky-btn-link {
    color: var(--sky-color-text-action);
  }

  .sky-btn-borderless,
  .sky-btn-icon-borderless {
    color: var(--sky-color-icon-deemphasized);
  }

  .sky-btn-icon-borderless {
    padding: var(--sky-comp-button-borderless-space-inset-top)
      var(--sky-comp-button-borderless-space-inset-right)
      var(--sky-comp-button-borderless-space-inset-bottom)
      var(--sky-comp-button-borderless-space-inset-left);
    height: auto;
    width: auto;
    line-height: 1;
  }

  .sky-btn-link,
  .sky-btn-borderless,
  .sky-btn-icon-borderless {
    background-color: var(--sky-color-background-action-tertiary-base);
    box-shadow:
      inset 0 0 0 var(--sky-border-width-action-base)
        var(--sky-color-border-action-tertiary-base),
      var(
        --sky-comp-override-toolbar-button-elevation-base,
        var(--sky-elevation-action-tertiary-base)
      );

    &:hover {
      background-color: var(--sky-color-background-action-tertiary-hover);
      box-shadow:
        inset 0 0 0 var(--sky-border-width-action-hover)
          var(--sky-color-border-action-tertiary-hover),
        var(
          --sky-comp-override-toolbar-button-elevation-hover,
          var(--sky-elevation-action-tertiary-hover)
        );
    }

    &:active,
    &.sky-btn-active {
      background-color: var(--sky-color-background-action-tertiary-active);
      box-shadow:
        inset 0 0 0 var(--sky-border-width-action-active)
          var(--sky-color-border-action-tertiary-active),
        var(
          --sky-comp-override-toolbar-button-elevation-active,
          var(--sky-elevation-action-tertiary-active)
        );
      transition: none;
    }

    &:focus-visible:not(:active) {
      background-color: var(--sky-color-background-action-tertiary-focus);
      box-shadow:
        inset 0 0 0 var(--sky-border-width-action-focus)
          var(--sky-color-border-action-tertiary-focus),
        var(
          --sky-comp-override-toolbar-button-elevation-focus,
          var(--sky-elevation-action-tertiary-focus)
        );
    }

    &.sky-btn-disabled,
    &[disabled] {
      &,
      &:hover,
      &:focus-visible,
      &.sky-btn-focus,
      &:active,
      &.sky-btn-active {
        box-shadow:
          inset 0 0 0 var(--sky-border-width-action-disabled)
            var(--sky-color-border-action-tertiary-disabled),
          var(
            --sky-comp-override-toolbar-button-elevation-disabled,
            var(--sky-elevation-action-tertiary-disabled)
          );
        background-color: var(--sky-color-background-action-tertiary-disabled);

        &:is(:focus-visible, .sky-btn-focus) {
          box-shadow:
            inset 0 0 0 var(--sky-border-width-action-disabled)
              var(--sky-color-border-action-tertiary-disabled),
            var(
              --sky-comp-override-toolbar-button-elevation-disabled,
              var(--sky-elevation-action-tertiary-disabled)
            );
        }
      }
    }
  }

  .sky-btn-link-inline {
    background-color: transparent;
    border-radius: var(--sky-border-radius-s);
    padding: var(--sky-space-inset-balanced-none);
    color: var(--sky-color-text-action);

    &:focus-visible:not(:active) {
      background-color: transparent;
      box-shadow: 0 0 0 var(--sky-border-width-action-focus)
        var(--sky-color-border-action-tertiary-focus);
    }

    &:active {
      background-color: transparent;
    }

    &:hover {
      background-color: transparent;
    }

    &:hover,
    &:active {
      color: var(--sky-color-text-action);
      text-decoration: underline;
    }

    &.sky-btn-disabled,
    &[disabled] {
      &,
      &:hover,
      &:focus-visible,
      &.sky-btn-focus,
      &:active,
      &.sky-btn-active {
        box-shadow: inset 0 0 0 0
          var(--sky-color-border-action-tertiary-disabled);

        &:is(:focus-visible, .sky-btn-focus) {
          box-shadow: inset 0 0 0 0
            var(--sky-color-border-action-tertiary-disabled);
        }
      }
    }
  }

  .sky-btn-borderless-inline {
    color: var(--sky-color-text-deemphasized);
    padding: var(--sky-space-inset-balanced-none);

    &:focus-visible:not(:active) {
      box-shadow: 0 0 0 var(--sky-border-width-action-focus)
        var(--sky-color-border-action-tertiary-focus);
    }

    &.sky-btn-disabled,
    &[disabled] {
      &,
      &:hover,
      &:focus-visible,
      &.sky-btn-focus,
      &:active,
      &.sky-btn-active {
        box-shadow: inset 0 0 0 0
          var(--sky-color-border-action-tertiary-disabled);

        &:is(:focus-visible, .sky-btn-focus) {
          box-shadow: inset 0 0 0 0
            var(--sky-color-border-action-tertiary-disabled);
        }
      }
    }
  }

  .sky-btn-sm {
    padding: $sky-padding-half $sky-padding;
    font-size: 12px;
    line-height: 1.5;
  }

  .sky-btn-block {
    font-size: var(--sky-font-size-body-l);
    line-height: var(--sky-font-line_height-body-l);
    padding: var(--sky-comp-button-block-space-inset-top)
      var(--sky-comp-button-block-space-inset-right)
      var(--sky-comp-button-block-space-inset-bottom)
      var(--sky-comp-button-block-space-inset-left);

    &:has(.sky-btn-block-logo) {
      // Reserve space for a medium-size icon on the left. The icon will be
      // positioned on top of this space.
      --sky-btn-block-logo-padding-sides: calc(
        var(--sky-size-icon-m) +
          calc(
            var(--sky-comp-button-block-space-inset-left) +
              var(--sky-comp-button-block-space-inset-right)
          )
      );

      // Set both the left and right padding for symmetry.
      padding-left: var(--sky-btn-block-logo-padding-sides);
      padding-right: var(--sky-btn-block-logo-padding-sides);
    }

    .sky-btn-block-logo {
      left: var(--sky-comp-button-block-space-inset-left);
    }
  }

  .sky-btn-tab {
    background-color: var(--sky-color-background-tab-base);
    border: none;
    border-radius: 0;
    border-top-left-radius: var(--sky-border-radius-s);
    border-top-right-radius: var(--sky-border-radius-s);
    color: var(--sky-color-text-deemphasized);
    font-size: var(--sky-font-size-body-m);
    font-weight: var(--sky-font-style-body-m);
    line-height: var(--sky-font-line_height-body-m);
    padding: var(--sky-comp-tab-horizontal-space-inset-top)
      var(--sky-comp-tab-horizontal-space-inset-right)
      var(--sky-comp-tab-horizontal-space-inset-bottom)
      var(--sky-comp-tab-horizontal-space-inset-left);
    transition: box-shadow $sky-transition-time-short;

    &:hover:not(.sky-btn-tab-disabled):not(.sky-btn-tab-selected):not(
        .sky-dropdown-button-type-tab
      ):not(:focus-visible) {
      background-color: var(--sky-color-background-tab-hover);
      border-bottom: var(--sky-border-width-selected-s)
        var(--sky-border-style-accent) var(--sky-color-border-tab-hover);
      color: var(--sky-color-text-default);
      padding-bottom: calc(
        var(--sky-comp-tab-horizontal-space-inset-bottom) - var(
            --sky-border-width-selected-s
          )
      );
    }

    &:focus-visible {
      background-color: var(--sky-color-background-tab-focus);
      outline: none;

      &:not(.sky-btn-tab-selected) {
        color: var(--sky-color-text-default);
      }

      &.sky-btn-tab-selected {
        background-color: var(--sky-color-background-selected-soft);
      }
    }

    &:focus-visible:not(:active) {
      &:not(.sky-btn-tab-selected) {
        color: var(--sky-color-text-default);
      }
      outline: solid var(--sky-border-width-selected-m)
        var(--sky-color-border-tab-focus);
      outline-offset: calc(var(--sky-border-width-selected-m) * -1);
      box-shadow: none;
    }

    &:active,
    &:active:hover:not(.sky-btn-tab-disabled):not(.sky-btn-tab-selected):not(
        :focus-visible
      ) {
      color: var(--sky-color-text-default);
      background-color: var(--sky-color-background-tab-active);
      border-bottom: var(--sky-border-width-selected-s)
        var(--sky-border-style-accent) var(--sky-color-border-tab-active);
      padding-bottom: calc(
        var(--sky-comp-tab-horizontal-space-inset-bottom) - var(
            --sky-border-width-selected-s
          )
      );

      &.sky-btn-tab-selected {
        background-color: var(--sky-color-background-selected-soft);
        border-bottom: var(--sky-border-width-selected-m)
          var(--sky-border-style-accent) var(--sky-color-border-selected);
        padding-bottom: calc(
          var(--sky-comp-tab-horizontal-space-inset-bottom) - var(
              --sky-border-width-selected-m
            )
        );
      }
    }

    .sky-btn-tab-close {
      margin-left: var(--sky-space-gap-text_action-xs);
    }

    &.sky-btn-tab-disabled {
      background-color: var(--sky-color-background-tab-disabled);
      color: var(--sky-color-text-deemphasized);
      font-style: var(--sky-font-style-deemphasized-style);
      font-weight: var(--sky-font-style-deemphasized-weight);
      font-size: var(--sky-font-size-body-m);

      .sky-btn-tab-close {
        font-size: var(--sky-font-size-body-m);
      }
    }
  }

  .sky-btn-tab-selected:not(.sky-btn-tab-disabled) {
    background-color: var(--sky-color-background-tab-selected);
    color: var(--sky-color-text-selected);
    box-shadow: none;

    &:not(:active) {
      border-bottom: var(--sky-border-width-selected-m)
        var(--sky-border-style-accent) var(--sky-color-border-selected);
      padding-bottom: calc(
        var(--sky-comp-tab-horizontal-space-inset-bottom) - var(
            --sky-border-width-selected-m
          )
      );
    }

    &:hover:not(.sky-btn-tab-disabled) {
      background-color: var(--sky-color-background-tab-selected);
      color: var(--sky-color-text-selected);
    }

    .sky-btn-tab-close,
    .sky-tab-header-count {
      color: var(--sky-color-text-deemphasized);
    }

    .sky-btn-tab-close {
      background-color: transparent;
      border: none;
      cursor: pointer;
    }
  }

  .sky-tab-header-count {
    color: var(--sky-color-text-deemphasized);
    margin-left: var(--sky-space-gap-label-m);
  }

  .sky-tab-dropdown-menu-item {
    .sky-btn-tab {
      border-radius: var(--sky-border-radius-s);
      padding: var(--sky-comp-tab-horizontal-space-inset-top)
        var(--sky-comp-tab-horizontal-space-inset-right)
        var(--sky-comp-tab-horizontal-space-inset-bottom)
        var(--sky-comp-tab-horizontal-space-inset-left);
      &:hover:not(.sky-btn-tab-disabled) {
        border-bottom: none;
        outline: solid var(--sky-border-width-action-hover)
          var(--sky-color-border-action-secondary-hover);
        outline-offset: calc(var(--sky-border-width-action-hover) * -1);
      }

      &:hover:not(.sky-btn-tab-disabled):not(.sky-btn-tab-selected) {
        background-color: transparent;
      }

      &:focus-visible:not(:active) {
        background-color: transparent;
        box-shadow: none;
        outline: solid var(--sky-border-width-action-active)
          var(--sky-color-border-action-secondary-focus);
        outline-offset: calc(var(--sky-border-width-action-active) * -1);
      }

      &.sky-btn-tab-selected {
        background-color: var(--sky-color-background-selected-soft);
        color: var(--sky-color-text-default);
        border-bottom: none;
        border-radius: 0 var(--sky-border-radius-s) var(--sky-border-radius-s) 0;
        border-left: var(--sky-border-width-selected-m)
          var(--sky-border-style-accent) var(--sky-color-border-selected);
        padding: var(--sky-comp-tab-horizontal-space-inset-top)
          var(--sky-comp-tab-horizontal-space-inset-right)
          var(--sky-comp-tab-horizontal-space-inset-bottom)
          calc(
            var(--sky-comp-tab-horizontal-space-inset-left) - var(
                --sky-border-width-selected-m
              )
          );
      }

      .sky-btn-tab-close {
        float: right;
      }
    }
  }
}
