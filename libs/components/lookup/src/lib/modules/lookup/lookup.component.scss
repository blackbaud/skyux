@use 'libs/components/theme/src/lib/styles/mixins' as defaultMixins;
@use 'libs/components/theme/src/lib/styles/variables' as *;

.sky-lookup {
  .sky-lookup-input.sky-form-control {
    resize: none;
    border: 0;
    box-sizing: content-box;
    height: #{$sky-line-height-base}em;
    overflow: hidden;
    padding: 0;
    background-color: transparent;

    &:focus {
      outline: none;
      box-shadow: none;
    }
  }

  .sky-lookup-search-flex-wrapper {
    display: flex;
  }

  &.sky-lookup-disabled {
    .sky-lookup-search {
      background-color: $sky-background-color-disabled;
    }
  }

  sky-tokens.sky-lookup-tokens {
    &:focus {
      outline: none;
    }

    .sky-tokens {
      margin-top: -5px;
      margin-bottom: -5px;

      .sky-tokens-content {
        padding-top: 5px;
        padding-bottom: 5px;
        padding-left: 10px;
        flex-basis: 100px;
      }
    }
  }

  .sky-lookup-single-control {
    display: inline-flex;
    padding-left: 7px;
    width: 100%;
  }
}

.sky-lookup-search {
  cursor: text;
  background-color: $sky-color-white;
  line-height: #{$sky-line-height-base}em;
  padding: 6px 12px 6px 3px;
  flex-grow: 1;

  &:not(.sky-field-status-active) {
    @include defaultMixins.sky-border(dark, top, bottom, left, right);
  }
}

.sky-lookup-disabled {
  .sky-lookup-search {
    cursor: default;
  }
}

.sky-lookup-focused {
  .sky-tokens-content {
    flex-basis: 100px;
  }
}

.sky-lookup-single {
  sky-tokens.sky-lookup-tokens sky-token {
    display: none;
  }
}

sky-lookup.ng-invalid.ng-touched .sky-lookup-search {
  @include defaultMixins.sky-field-status(invalid);
}

sky-input-box .sky-lookup {
  width: 100%;

  .sky-lookup-search {
    border: none;
    padding-bottom: 5px;
    width: 100%;
  }
}

@include defaultMixins.sky-theme-modern {
  sky-tokens.sky-lookup-tokens {
    .sky-tokens {
      margin-top: -6px;
    }
  }

  sky-input-box .sky-lookup {
    // Since we are applying the host template directly - add the same spacing styles that we do around a directly projected text area.
    margin-top: -23px;
    padding-top: 26px;

    sky-tokens.sky-lookup-tokens {
      // Input box adds a negative margin-top to elements with the
      // `sky-form-control` class in modern theme which causes that
      // element to cover the token elements. Setting z-index here
      // will place the token elements over the form control.
      sky-token {
        z-index: 1;
      }

      .sky-tokens {
        margin-top: 0;
        margin-bottom: 0;

        sky-token {
          padding-bottom: 0;
          padding-top: 0;
        }

        .sky-tokens-content {
          padding-bottom: 0;
          padding-top: 0;

          &:first-child {
            padding-left: 0;
          }
        }
      }
    }

    &.sky-lookup-single {
      sky-tokens.sky-lookup-tokens {
        .sky-tokens-content {
          padding-left: 0;
        }
      }
    }

    .sky-lookup-search {
      background-color: transparent;
      padding: 0 0 0 15px;

      &.sky-field-status-active {
        box-shadow: none;
      }
    }

    textarea.sky-lookup-input.sky-form-control {
      padding-left: 0;
      resize: none;
    }

    .sky-lookup-single-control {
      padding-left: 0;
    }
  }
}
