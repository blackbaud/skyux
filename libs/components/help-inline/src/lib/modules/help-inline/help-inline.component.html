@if (popoverContent) {
  <sky-help-inline-popover-button
    [ariaControls]="ariaControls"
    [ariaLabel]="
      !labelText && !labelledBy
        ? ariaLabel
          ? ariaLabel
          : ('skyux_help_inline_button_title' | skyLibResources)
        : undefined
    "
    [ariaLabelledBy]="
      labelledBy
        ? labelledByEl.id + ' ' + labelledBy
        : labelText
          ? labelTextEl.id
          : undefined
    "
    [labelText]="labelText"
    [popoverContent]="popoverContent"
    [popoverTitle]="popoverTitle"
    (click)="actionClick.emit()"
  >
    <ng-container [ngTemplateOutlet]="iconTemplate" />
  </sky-help-inline-popover-button>
} @else if (helpKey) {
  <sky-help-inline-help-key-button
    [ariaControls]="ariaControls"
    [ariaLabel]="
      !labelText && !labelledBy
        ? ariaLabel
          ? ariaLabel
          : ('skyux_help_inline_button_title' | skyLibResources)
        : undefined
    "
    [ariaLabelledBy]="
      labelledBy
        ? labelledByEl.id + ' ' + labelledBy
        : labelText
          ? labelTextEl.id
          : undefined
    "
    [helpKey]="helpKey"
    [labelText]="labelText"
    (click)="actionClick.emit()"
  >
    <ng-container [ngTemplateOutlet]="iconTemplate" />
  </sky-help-inline-help-key-button>
} @else {
  <button
    class="sky-help-inline"
    type="button"
    [attr.aria-controls]="ariaControls"
    [attr.aria-expanded]="ariaControls ? !!ariaExpanded : null"
    [attr.aria-label]="
      labelText || labelledBy
        ? undefined
        : ariaLabel
          ? ariaLabel
          : ('skyux_help_inline_button_title' | skyLibResources)
    "
    [attr.aria-labelledby]="
      labelledBy
        ? labelledByEl.id + ' ' + labelledBy
        : labelText
          ? labelTextEl.id
          : undefined
    "
    (click)="actionClick.emit()"
  >
    <ng-container [ngTemplateOutlet]="iconTemplate" />
  </button>
}

<ng-template #iconTemplate>
  <sky-icon *skyThemeIf="'default'" icon="info-circle" />
  <sky-icon-stack
    *skyThemeIf="'modern'"
    size="xs"
    [baseIcon]="{
      icon: 'circle-solid',
      iconType: 'skyux'
    }"
    [topIcon]="{
      icon: 'help-i',
      iconType: 'skyux'
    }"
  />
</ng-template>

<span hidden skyId #labelTextEl="skyId">
  {{ 'skyux_help_inline_aria_label' | skyLibResources: labelText }}
</span>

<span hidden skyId #labelledByEl="skyId">
  {{ 'skyux_help_inline_aria_label' | skyLibResources: '' }}
</span>
