<sky-progress-indicator
  #progressIndicator
  data-sky-id="demo-progress-indicator"
  [messageStream]="progressMessageStream"
  [startingIndex]="2"
  (progressChanges)="updateIndex($event)"
>
  <sky-progress-indicator-title>
    Set up my connection
  </sky-progress-indicator-title>

  <sky-progress-indicator-item
    data-sky-id="configure-connection"
    helpPopoverContent="Example help for configure connection"
    title="Configure connection"
  >
    <div>
      @if (activeIndex === 0) {
        <button
          class="sky-btn sky-btn-primary"
          type="button"
          (click)="configureConnection(true)"
        >
          Set up connection
        </button>
      }
      @if (activeIndex && activeIndex > 0) {
        <button
          class="sky-btn sky-btn-link"
          type="button"
          (click)="configureConnection(false)"
        >
          Edit connection
        </button>
      }
    </div>
  </sky-progress-indicator-item>

  <sky-progress-indicator-item
    helpPopoverContent="Example help for select remote server"
    helpPopoverTitle="Which server is right for me?"
    title="Select remote server"
  >
    @if (activeIndex && activeIndex >= 1) {
      <div>
        @if (activeIndex === 1) {
          <button
            class="sky-btn sky-btn-primary"
            type="button"
            (click)="setServer(true)"
          >
            Select server
          </button>
        } @else {
          <button
            class="sky-btn sky-btn-link"
            type="button"
            (click)="setServer(false)"
          >
            Change server
          </button>
        }
      </div>
    }
  </sky-progress-indicator-item>

  <sky-progress-indicator-item
    data-sky-id="test-connection"
    title="Test connection"
  >
    @if (activeIndex && activeIndex >= 2) {
      <div>
        @if (activeIndex === 2) {
          <button
            class="sky-btn sky-btn-primary"
            type="button"
            (click)="testConnection(true)"
          >
            Test connection
          </button>
        } @else {
          <button
            class="sky-btn sky-btn-link"
            type="button"
            (click)="testConnection(false)"
          >
            Retest connection
          </button>
        }
      </div>
    }
  </sky-progress-indicator-item>

  <sky-progress-indicator-item title="Turn on connection">
    @if (activeIndex && activeIndex >= 3) {
      <div>
        @if (activeIndex === 3) {
          <button
            class="sky-btn sky-btn-primary"
            type="button"
            (click)="alertMessage('Form completed')"
          >
            Turn on
          </button>
        }
      </div>
    }
  </sky-progress-indicator-item>

  <sky-progress-indicator-reset-button [progressIndicator]="progressIndicator">
    Erase all settings
  </sky-progress-indicator-reset-button>
</sky-progress-indicator>
