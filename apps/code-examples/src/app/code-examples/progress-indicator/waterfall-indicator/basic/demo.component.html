<sky-progress-indicator
  [messageStream]="progressMessageStream"
  [startingIndex]="2"
  (progressChanges)="updateIndex($event)"
  #progressIndicator
>
  <sky-progress-indicator-title>
    Set up my connection
  </sky-progress-indicator-title>

  <sky-progress-indicator-item
    helpPopoverContent="Example help for configure connection"
    title="Configure connection"
  >
    <div>
      <button
        *ngIf="activeIndex === 0"
        class="sky-btn sky-btn-primary"
        type="button"
        (click)="configureConnection(true)"
      >
        Set up connection
      </button>
      <button
        *ngIf="activeIndex && activeIndex > 0"
        class="sky-btn sky-btn-link"
        type="button"
        (click)="configureConnection(false)"
      >
        Edit connection
      </button>
    </div>
  </sky-progress-indicator-item>

  <sky-progress-indicator-item
    helpPopoverContent="Example help for select remote server"
    helpPopoverTitle="Which server is right for me?"
    title="Select remote server"
  >
    <div *ngIf="activeIndex && activeIndex >= 1">
      <button
        *ngIf="activeIndex === 1"
        class="sky-btn sky-btn-primary"
        type="button"
        (click)="setServer(true)"
      >
        Select server
      </button>
      <button
        *ngIf="activeIndex > 1"
        class="sky-btn sky-btn-link"
        type="button"
        (click)="setServer(false)"
      >
        Change server
      </button>
    </div>
  </sky-progress-indicator-item>

  <sky-progress-indicator-item title="Test connection">
    <div *ngIf="activeIndex && activeIndex >= 2">
      <button
        *ngIf="activeIndex === 2"
        class="sky-btn sky-btn-primary"
        type="button"
        (click)="testConnection(true)"
      >
        Test connection
      </button>
      <button
        *ngIf="activeIndex > 2"
        class="sky-btn sky-btn-link"
        type="button"
        (click)="testConnection(false)"
      >
        Retest connection
      </button>
    </div>
  </sky-progress-indicator-item>

  <sky-progress-indicator-item title="Turn on connection">
    <div *ngIf="activeIndex && activeIndex >= 3">
      <button
        *ngIf="activeIndex === 3"
        class="sky-btn sky-btn-primary"
        type="button"
        (click)="alertMessage('Form completed')"
      >
        Turn on
      </button>
    </div>
  </sky-progress-indicator-item>

  <sky-progress-indicator-reset-button [progressIndicator]="progressIndicator">
    Erase all settings
  </sky-progress-indicator-reset-button>
</sky-progress-indicator>
